"use strict";var detailsCard,detailsFront,detailsBack,cardholderInput,cardholderOutput,cardNumberInput,cardNumberOutput,expirationMonthInput,expirationMonthOutput,expirationYearInput,expirationYearOutput,cvcNumberInput,cvcNumberOutput,submitBtn,continueBtn,DEFAULT_CARDHOLDER="Jane appleseed",DEFAULT_CARD_NUMBER="0000 0000 0000 0000",DEFAULT_EXPIRATION_MONTH="00",DEFAULT_EXPIRATION_YEAR="00",DEFAULT_CVC="000",main=function(){prepareDOMElements(),prepareDOMEvents()},prepareDOMElements=function(){detailsCard=document.querySelector(".details"),detailsFront=detailsCard.querySelector("[data-side=front]"),detailsBack=detailsCard.querySelector("[data-side=back]"),cardholderInput=document.querySelector("#cardholder-name"),cardholderOutput=document.querySelector("#cardholder-name-output"),cardNumberInput=document.querySelector("#card-number"),cardNumberOutput=document.querySelector("#card-number-output"),expirationMonthInput=document.querySelector("#expiration-month"),expirationMonthOutput=document.querySelector("#expiration-month-output"),expirationYearInput=document.querySelector("#expiration-year"),expirationYearOutput=document.querySelector("#expiration-year-output"),cvcNumberInput=document.querySelector("#card-cvc"),cvcNumberOutput=document.querySelector("#card-cvc-output"),submitBtn=document.querySelector("#details-submit-button"),continueBtn=document.querySelector("#confirmation-button")},prepareDOMEvents=function(){cardholderInput.addEventListener("input",handleCardholderName),cardholderInput.addEventListener("focusout",handleCardholderName),cardNumberInput.addEventListener("input",handleCardNumber),cardNumberInput.addEventListener("focusout",handleCardNumber),expirationMonthInput.addEventListener("input",handleExpirationMonth),expirationMonthInput.addEventListener("focusout",handleExpirationMonth),expirationYearInput.addEventListener("input",handleExpirationYear),expirationYearInput.addEventListener("focusout",handleExpirationYear),cvcNumberInput.addEventListener("input",handleCVCNumber),cvcNumberInput.addEventListener("focusout",handleCVCNumber),submitBtn.addEventListener("click",handleSubmitBtn),continueBtn.addEventListener("click",handleContinueBtn)},handleCardholderName=function(e){var e=e.target,r=e.value,t=validateCardholderName(r),a=t.isValid,t=t.errorMsg;a?clearError(e):showErrorMessage(e,t),insertOutput(cardholderOutput,r)},validateCardholderName=function(e){e=e.trim();return checkBlank(e)?{isValid:!1,errorMsg:"Can't be blank"}:{isValid:!0,errorMsg:""}},checkBlank=function(e){return""===e},handleCardNumber=function(e){var e=e.target,r=removeSpaces(e.value),t=validateCardNumber(r),a=t.isValid,t=t.errorMsg;e.value=groupCardNumber(r,4),a?clearError(e):showErrorMessage(e,t),insertOutput(cardNumberOutput,formatCardNumber(r))},validateCardNumber=function(e){var e=removeSpaces(e),r=checkBlank(e),t=/^[^\D]+$/.test(e),e=16===e.length;return r?{isValid:!1,errorMsg:"Can't be blank"}:t?e?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Too short"}:{isValid:!1,errorMsg:"Wrong format, numbers only"}},formatCardNumber=function(e){e=removeSpaces(e).padEnd(16,"0");return groupCardNumber(e,4)},groupCardNumber=function(e,r){for(var t=[],a=0;a<e.length;a+=r)t.push(e.slice(a,a+r));return t.join(" ")},removeSpaces=function(e){return e.replace(/\s/g,"")},handleExpirationMonth=function(e){var e=e.target,r=e.value.trim(),t=validateExpiration(r,validateExpirationMonth),a=t.isValid,t=t.errorMsg;a?clearError(e):showErrorMessage(e,t),insertOutput(expirationMonthOutput,r)},handleExpirationYear=function(e){var e=e.target,r=e.value.trim(),t=validateExpiration(r,validateExpirationYear),a=t.isValid,t=t.errorMsg;a?clearError(e):showErrorMessage(e,t),insertOutput(expirationYearOutput,r)},validateExpiration=function(e,r){var e=e.trim(),t=checkBlank(e),r=r(e);return t?{isValid:!1,errorMsg:"Can't be blank"}:r?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Wrong format"}},validateExpirationMonth=function(e){return/^0[1-9]$|^1[0-2]$/.test(e)},validateExpirationYear=function(e){return/^\d{2}$/.test(e)},handleCVCNumber=function(e){var e=e.target,r=e.value,t=validateCVC(r),a=t.isValid,t=t.errorMsg;a?clearError(e):showErrorMessage(e,t),insertOutput(cvcNumberOutput,r)},validateCVC=function(e){var e=e.trim(),r=checkBlank(e),e=/^\d{3}$/.test(e);return r?{isValid:!1,errorMsg:"Can't be blank"}:e?{isValid:!0,errorMsg:""}:{isValid:!1,errorMsg:"Wrong format"}},insertOutput=function(e,r){e.innerText=r},showErrorMessage=function(e,r){e.closest(".details-form__input-container").querySelector(".details-form__error").innerText=r,e.classList.add("error")},clearError=function(e){showErrorMessage(e,""),e.classList.remove("error")},handleSubmitBtn=function(e){e.preventDefault();var e=validateCardholderName(cardNumberInput.value),r=e.isValid,e=e.errorMsg,t=validateCardNumber(cardNumberInput.value),a=t.isValid,t=t.errorMsg,n=validateExpiration(expirationMonthInput.value,validateExpirationMonth),i=n.isValid,n=n.errorMsg,o=validateExpiration(expirationYearInput.value,validateExpirationYear),u=o.isValid,o=o.errorMsg,d=validateCVC(cvcNumberInput.value),s=d.isValid,d=d.errorMsg;r&&a&&i&&u&&s&&showConfirmation(),r||showErrorMessage(cardholderInput,e),a||showErrorMessage(cardNumberInput,t),i||showErrorMessage(expirationMonthInput,n),u||showErrorMessage(expirationYearInput,o),s||showErrorMessage(cvcNumberInput,d)},showConfirmation=function(){detailsFront.classList.add("animation-flip-out"),setTimeout(function(){detailsFront.classList.remove("animation-flip-out"),detailsFront.classList.add("hidden"),detailsBack.classList.add("animation-flip-in"),detailsBack.classList.remove("hidden")},900),setTimeout(function(){detailsBack.classList.remove("animation-flip-in")},1800)},handleContinueBtn=function(e){detailsCard.removeAttribute("data-completed"),detailsFront.classList.remove("hidden"),detailsBack.classList.add("hidden"),clearInputs(),clearOutputs()},clearInputs=function(){cardholderInput.value="",cardNumberInput.value="",expirationMonthInput.value="",expirationYearInput.value="",cvcNumberInput.value=""},clearOutputs=function(){cardholderOutput.innerText=DEFAULT_CARDHOLDER,cardNumberOutput.innerText=DEFAULT_CARD_NUMBER,expirationMonthOutput.innerText=DEFAULT_EXPIRATION_MONTH,expirationYearOutput.innerText=DEFAULT_EXPIRATION_YEAR,cvcNumberOutput.innerText=DEFAULT_CVC};document.addEventListener("DOMContentLoaded",main);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZGV0YWlsc0NhcmQiLCJkZXRhaWxzRnJvbnQiLCJkZXRhaWxzQmFjayIsImNhcmRob2xkZXJPdXRwdXQiLCJjYXJkaG9sZGVySW5wdXQiLCJjYXJkTnVtYmVySW5wdXQiLCJjYXJkTnVtYmVyT3V0cHV0IiwiZXhwaXJhdGlvbk1vbnRoSW5wdXQiLCJleHBpcmF0aW9uWWVhcklucHV0IiwiREVGQVVMVF9DQVJESE9MREVSIiwiREVGQVVMVF9DQVJEX05VTUJFUiIsIkRFRkFVTFRfRVhQSVJBVElPTl9NT05USCIsIkRFRkFVTFRfQ1ZDIiwicHJlcGFyZURPTUVsZW1lbnRzIiwicHJlcGFyZURPTUV2ZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImV4cGlyYXRpb25Nb250aE91dHB1dCIsImV4cGlyYXRpb25ZZWFyT3V0cHV0IiwiY3ZjTnVtYmVySW5wdXQiLCJjdmNOdW1iZXJPdXRwdXQiLCJzdWJtaXRCdG4iLCJjb250aW51ZUJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVDYXJkaG9sZGVyTmFtZSIsImhhbmRsZUNhcmROdW1iZXIiLCJoYW5kbGVFeHBpcmF0aW9uTW9udGgiLCJoYW5kbGVFeHBpcmF0aW9uWWVhciIsImhhbmRsZUNWQ051bWJlciIsImhhbmRsZVN1Ym1pdEJ0biIsImUiLCJpbnB1dCIsInRhcmdldCIsIl92YWxpZGF0ZUNhcmRob2xkZXJOYSIsInZhbGlkYXRlQ2FyZGhvbGRlck5hbWUiLCJ2YWx1ZSIsImlzVmFsaWQiLCJjbGVhckVycm9yIiwic2hvd0Vycm9yTWVzc2FnZSIsImVycm9yTXNnIiwiaW5zZXJ0T3V0cHV0IiwidHJpbW1lZCIsInRyaW0iLCJjaGVja0JsYW5rIiwicmVtb3ZlU3BhY2VzIiwiX3ZhbGlkYXRlQ2FyZE51bWJlciIsInZhbGlkYXRlQ2FyZE51bWJlciIsImdyb3VwQ2FyZE51bWJlciIsImZvcm1hdENhcmROdW1iZXIiLCJ3aXRob3V0U3BhY2VzIiwiaXNWYWxpZGF0ZWQiLCJ0ZXN0IiwiaXNMb25nRW5vdWdoIiwiY2FyZE51bWJlciIsImlzQmxhbmsiLCJsZW5ndGgiLCJwYWRFbmQiLCJwYWRkZWQiLCJpdGVtc0luR3JvdXAiLCJpIiwiZ3JvdXBzIiwicHVzaCIsInNsaWNlIiwiam9pbiIsInJlcGxhY2UiLCJfdmFsaWRhdGVFeHBpcmF0aW9uIiwidmFsaWRhdGVFeHBpcmF0aW9uIiwidmFsaWRhdGVFeHBpcmF0aW9uTW9udGgiLCJfdmFsaWRhdGVFeHBpcmF0aW9uMiIsInZhbGlkYXRlRXhwaXJhdGlvblllYXIiLCJ2YWxpZGF0b3IiLCJfdmFsaWRhdGVDVkMiLCJ2YWxpZGF0ZUNWQyIsIm91dHB1dCIsImlubmVyVGV4dCIsIm1lc3NhZ2UiLCJjbG9zZXN0IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiX3ZhbGlkYXRlQ2FyZGhvbGRlck5hMiIsImlzTmFtZVZhbGlkIiwibmFtZUVycm9yIiwiX3ZhbGlkYXRlQ2FyZE51bWJlcjIiLCJpc0NhcmROdW1iZXJWYWxpZCIsImNhcmROdW1iZXJFcnJvciIsIl92YWxpZGF0ZUV4cGlyYXRpb24zIiwiaXNFeHBpcmF0aW9uTW9udGhWYWxpZCIsImV4cE1vbnRoRXJyb3IiLCJfdmFsaWRhdGVFeHBpcmF0aW9uNCIsImlzRXhwaXJhdGlvblllYXJWYWxpZCIsImV4cFllYXJFcnJvciIsIl92YWxpZGF0ZUNWQzIiLCJpc0NWQ1ZhbGlkIiwiY3ZjRXJyb3IiLCJzaG93Q29uZmlybWF0aW9uIiwic2V0VGltZW91dCIsImVycm9yIiwiaGFuZGxlQ29udGludWVCdG4iLCJyZW1vdmVBdHRyaWJ1dGUiLCJwcmV2ZW50RGVmYXVsdCIsImNsZWFySW5wdXRzIiwiY2xlYXJPdXRwdXRzIiwiREVGQVVMVF9FWFBJUkFUSU9OX1lFQVIiLCJtYWluIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxZQUNBQyxhQUFjQyxZQURkRixnQkFBSkcsaUJBQ0lGLGdCQUFjQyxpQkFDZEUscUJBQWlCRCxzQkFDakJFLG9CQUFpQkMscUJB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cUJ3RCxVQUFZNkIsd0JBQ2pDbkYsZ0JBaERBc0QsVUFBb0RGLGFBbURyRHpELFNBakRDUSxpQkFBQSxtQkFBQWlGIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IGRldGFpbHNDYXJkO1xyXG5sZXQgZGV0YWlsc0Zyb250LCBkZXRhaWxzQmFjaztcclxubGV0IGNhcmRob2xkZXJJbnB1dCwgY2FyZGhvbGRlck91dHB1dDtcclxubGV0IGNhcmROdW1iZXJJbnB1dCwgY2FyZE51bWJlck91dHB1dDtcclxubGV0IGV4cGlyYXRpb25Nb250aElucHV0LCBleHBpcmF0aW9uTW9udGhPdXRwdXQ7XHJcbmxldCBleHBpcmF0aW9uWWVhcklucHV0LCBleHBpcmF0aW9uWWVhck91dHB1dDtcclxubGV0IGN2Y051bWJlcklucHV0LCBjdmNOdW1iZXJPdXRwdXQ7XHJcbmxldCBzdWJtaXRCdG4sIGNvbnRpbnVlQnRuO1xyXG5cclxuLyogZGVmYXVsdHMgZm9yIHJlc2V0aW5nIGluZm9ybWF0aW9uIG9uIG91dHB1dHMgKi9cclxuY29uc3QgREVGQVVMVF9DQVJESE9MREVSID0gJ0phbmUgYXBwbGVzZWVkJztcclxuY29uc3QgREVGQVVMVF9DQVJEX05VTUJFUiA9ICcwMDAwIDAwMDAgMDAwMCAwMDAwJztcclxuY29uc3QgREVGQVVMVF9FWFBJUkFUSU9OX01PTlRIID0gJzAwJztcclxuY29uc3QgREVGQVVMVF9FWFBJUkFUSU9OX1lFQVIgPSAnMDAnO1xyXG5jb25zdCBERUZBVUxUX0NWQyA9ICcwMDAnO1xyXG5cclxuY29uc3QgbWFpbiA9ICgpID0+IHtcclxuXHRwcmVwYXJlRE9NRWxlbWVudHMoKTtcclxuXHRwcmVwYXJlRE9NRXZlbnRzKCk7XHJcbn07XHJcblxyXG5jb25zdCBwcmVwYXJlRE9NRWxlbWVudHMgPSAoKSA9PiB7XHJcblx0ZGV0YWlsc0NhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGV0YWlscycpO1xyXG5cdGRldGFpbHNGcm9udCA9IGRldGFpbHNDYXJkLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpZGU9ZnJvbnRdJyk7XHJcblx0ZGV0YWlsc0JhY2sgPSBkZXRhaWxzQ2FyZC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaWRlPWJhY2tdJyk7XHJcblxyXG5cdC8qIGlucHV0cyBhbmQgb3V0cHV0cyAqL1xyXG5cdGNhcmRob2xkZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkaG9sZGVyLW5hbWUnKTtcclxuXHRjYXJkaG9sZGVyT3V0cHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmRob2xkZXItbmFtZS1vdXRwdXQnKTtcclxuXHRjYXJkTnVtYmVySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC1udW1iZXInKTtcclxuXHRjYXJkTnVtYmVyT3V0cHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtbnVtYmVyLW91dHB1dCcpO1xyXG5cdGV4cGlyYXRpb25Nb250aElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGlyYXRpb24tbW9udGgnKTtcclxuXHRleHBpcmF0aW9uTW9udGhPdXRwdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwaXJhdGlvbi1tb250aC1vdXRwdXQnKTtcclxuXHRleHBpcmF0aW9uWWVhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGlyYXRpb24teWVhcicpO1xyXG5cdGV4cGlyYXRpb25ZZWFyT3V0cHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGlyYXRpb24teWVhci1vdXRwdXQnKTtcclxuXHRjdmNOdW1iZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLWN2YycpO1xyXG5cdGN2Y051bWJlck91dHB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLWN2Yy1vdXRwdXQnKTtcclxuXHJcblx0LyogYnV0dG9ucyAqL1xyXG5cdHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXRhaWxzLXN1Ym1pdC1idXR0b24nKTtcclxuXHRjb250aW51ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb25maXJtYXRpb24tYnV0dG9uJyk7XHJcbn07XHJcblxyXG5jb25zdCBwcmVwYXJlRE9NRXZlbnRzID0gKCkgPT4ge1xyXG5cdC8qIGNhcmRob2xkZXIgaW5wdXQgKi9cclxuXHRjYXJkaG9sZGVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVDYXJkaG9sZGVyTmFtZSk7XHJcblx0Y2FyZGhvbGRlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlQ2FyZGhvbGRlck5hbWUpO1xyXG5cclxuXHQvKiBjYXJkIG51bWJlciBpbnB1dCAqL1xyXG5cdGNhcmROdW1iZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGhhbmRsZUNhcmROdW1iZXIpO1xyXG5cdGNhcmROdW1iZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUNhcmROdW1iZXIpO1xyXG5cclxuXHQvKiBleHBpcmF0aW9uIGlucHV0cyAqL1xyXG5cdGV4cGlyYXRpb25Nb250aElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgaGFuZGxlRXhwaXJhdGlvbk1vbnRoKTtcclxuXHRleHBpcmF0aW9uTW9udGhJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUV4cGlyYXRpb25Nb250aCk7XHJcblxyXG5cdGV4cGlyYXRpb25ZZWFySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVFeHBpcmF0aW9uWWVhcik7XHJcblx0ZXhwaXJhdGlvblllYXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUV4cGlyYXRpb25ZZWFyKTtcclxuXHJcblx0LyogQ1ZDIGlucHV0ICovXHJcblx0Y3ZjTnVtYmVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBoYW5kbGVDVkNOdW1iZXIpO1xyXG5cdGN2Y051bWJlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlQ1ZDTnVtYmVyKTtcclxuXHJcblx0LyogYnV0dG9ucyAqL1xyXG5cdHN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVN1Ym1pdEJ0bik7XHJcblx0Y29udGludWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb250aW51ZUJ0bik7XHJcbn07XHJcblxyXG4vKiBjYXJkaG9sZGVyIGlucHV0IGhhbmRsaW5nICovXHJcbmNvbnN0IGhhbmRsZUNhcmRob2xkZXJOYW1lID0gKGUpID0+IHtcclxuXHRjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xyXG5cdGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWU7XHJcblx0Y29uc3QgeyBpc1ZhbGlkLCBlcnJvck1zZyB9ID0gdmFsaWRhdGVDYXJkaG9sZGVyTmFtZSh2YWx1ZSk7XHJcblxyXG5cdGlmICghaXNWYWxpZCkgc2hvd0Vycm9yTWVzc2FnZShpbnB1dCwgZXJyb3JNc2cpO1xyXG5cdGVsc2UgY2xlYXJFcnJvcihpbnB1dCk7XHJcblxyXG5cdGluc2VydE91dHB1dChjYXJkaG9sZGVyT3V0cHV0LCB2YWx1ZSk7XHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0ZUNhcmRob2xkZXJOYW1lID0gKHZhbHVlKSA9PiB7XHJcblx0Y29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcclxuXHRjb25zdCBpc0JsYW5rID0gY2hlY2tCbGFuayh0cmltbWVkKTtcclxuXHJcblx0aWYgKGlzQmxhbmspIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvck1zZzogXCJDYW4ndCBiZSBibGFua1wiIH07XHJcblx0ZWxzZSByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBlcnJvck1zZzogJycgfTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrQmxhbmsgPSAodmFsdWUpID0+IHtcclxuXHRyZXR1cm4gdmFsdWUgPT09ICcnO1xyXG59O1xyXG5cclxuLyogY2FyZCBudW1iZXIgaW5wdXQgaGFuZGxpbmcgKi9cclxuY29uc3QgaGFuZGxlQ2FyZE51bWJlciA9IChlKSA9PiB7XHJcblx0Y29uc3QgaW5wdXQgPSBlLnRhcmdldDtcclxuXHRjb25zdCB2YWx1ZSA9IHJlbW92ZVNwYWNlcyhpbnB1dC52YWx1ZSk7XHJcblx0Y29uc3QgeyBpc1ZhbGlkLCBlcnJvck1zZyB9ID0gdmFsaWRhdGVDYXJkTnVtYmVyKHZhbHVlKTtcclxuXHRpbnB1dC52YWx1ZSA9IGdyb3VwQ2FyZE51bWJlcih2YWx1ZSwgNCk7XHJcblxyXG5cdGlmICghaXNWYWxpZCkgc2hvd0Vycm9yTWVzc2FnZShpbnB1dCwgZXJyb3JNc2cpO1xyXG5cdGVsc2UgY2xlYXJFcnJvcihpbnB1dCk7XHJcblxyXG5cdGluc2VydE91dHB1dChjYXJkTnVtYmVyT3V0cHV0LCBmb3JtYXRDYXJkTnVtYmVyKHZhbHVlKSk7XHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0ZUNhcmROdW1iZXIgPSAodmFsdWUpID0+IHtcclxuXHRjb25zdCB3aXRob3V0U3BhY2VzID0gcmVtb3ZlU3BhY2VzKHZhbHVlKTtcclxuXHRjb25zdCBpc0JsYW5rID0gY2hlY2tCbGFuayh3aXRob3V0U3BhY2VzKTtcclxuXHRjb25zdCBpc1ZhbGlkYXRlZCA9IC9eW15cXERdKyQvLnRlc3Qod2l0aG91dFNwYWNlcyk7XHJcblx0Y29uc3QgaXNMb25nRW5vdWdoID0gd2l0aG91dFNwYWNlcy5sZW5ndGggPT09IDE2O1xyXG5cclxuXHRpZiAoaXNCbGFuaykgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yTXNnOiBcIkNhbid0IGJlIGJsYW5rXCIgfTtcclxuXHRlbHNlIGlmICghaXNWYWxpZGF0ZWQpIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvck1zZzogJ1dyb25nIGZvcm1hdCwgbnVtYmVycyBvbmx5JyB9O1xyXG5cdGVsc2UgaWYgKCFpc0xvbmdFbm91Z2gpIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvck1zZzogJ1RvbyBzaG9ydCcgfTtcclxuXHRlbHNlIHJldHVybiB7IGlzVmFsaWQ6IHRydWUsIGVycm9yTXNnOiAnJyB9O1xyXG59O1xyXG5cclxuY29uc3QgZm9ybWF0Q2FyZE51bWJlciA9IChjYXJkTnVtYmVyKSA9PiB7XHJcblx0Y29uc3Qgd2l0aG91dFNwYWNlcyA9IHJlbW92ZVNwYWNlcyhjYXJkTnVtYmVyKTtcclxuXHRjb25zdCBwYWRkZWQgPSB3aXRob3V0U3BhY2VzLnBhZEVuZCgxNiwgJzAnKTtcclxuXHRyZXR1cm4gZ3JvdXBDYXJkTnVtYmVyKHBhZGRlZCwgNCk7XHJcbn07XHJcblxyXG5jb25zdCBncm91cENhcmROdW1iZXIgPSAodmFsdWUsIGl0ZW1zSW5Hcm91cCkgPT4ge1xyXG5cdGNvbnN0IGdyb3VwcyA9IFtdO1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpICs9IGl0ZW1zSW5Hcm91cCkgZ3JvdXBzLnB1c2godmFsdWUuc2xpY2UoaSwgaSArIGl0ZW1zSW5Hcm91cCkpO1xyXG5cdHJldHVybiBncm91cHMuam9pbignICcpO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlU3BhY2VzID0gKHZhbHVlKSA9PiB7XHJcblx0cmV0dXJuIHZhbHVlLnJlcGxhY2UoL1xccy9nLCAnJyk7XHJcbn07XHJcblxyXG4vKiBleHBpcmF0aW9uIGRhdGUgaGFuZGxpbmcgKi9cclxuY29uc3QgaGFuZGxlRXhwaXJhdGlvbk1vbnRoID0gKGUpID0+IHtcclxuXHRjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xyXG5cdGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWUudHJpbSgpO1xyXG5cdGNvbnN0IHsgaXNWYWxpZCwgZXJyb3JNc2cgfSA9IHZhbGlkYXRlRXhwaXJhdGlvbih2YWx1ZSwgdmFsaWRhdGVFeHBpcmF0aW9uTW9udGgpO1xyXG5cclxuXHRpZiAoIWlzVmFsaWQpIHNob3dFcnJvck1lc3NhZ2UoaW5wdXQsIGVycm9yTXNnKTtcclxuXHRlbHNlIGNsZWFyRXJyb3IoaW5wdXQpO1xyXG5cclxuXHRpbnNlcnRPdXRwdXQoZXhwaXJhdGlvbk1vbnRoT3V0cHV0LCB2YWx1ZSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVFeHBpcmF0aW9uWWVhciA9IChlKSA9PiB7XHJcblx0Y29uc3QgaW5wdXQgPSBlLnRhcmdldDtcclxuXHRjb25zdCB2YWx1ZSA9IGlucHV0LnZhbHVlLnRyaW0oKTtcclxuXHRjb25zdCB7IGlzVmFsaWQsIGVycm9yTXNnIH0gPSB2YWxpZGF0ZUV4cGlyYXRpb24odmFsdWUsIHZhbGlkYXRlRXhwaXJhdGlvblllYXIpO1xyXG5cclxuXHRpZiAoIWlzVmFsaWQpIHNob3dFcnJvck1lc3NhZ2UoaW5wdXQsIGVycm9yTXNnKTtcclxuXHRlbHNlIGNsZWFyRXJyb3IoaW5wdXQpO1xyXG5cclxuXHRpbnNlcnRPdXRwdXQoZXhwaXJhdGlvblllYXJPdXRwdXQsIHZhbHVlKTtcclxufTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlRXhwaXJhdGlvbiA9ICh2YWx1ZSwgdmFsaWRhdG9yKSA9PiB7XHJcblx0Y29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcclxuXHRjb25zdCBpc0JsYW5rID0gY2hlY2tCbGFuayh0cmltbWVkKTtcclxuXHRjb25zdCBpc1ZhbGlkYXRlZCA9IHZhbGlkYXRvcih0cmltbWVkKTtcclxuXHJcblx0aWYgKGlzQmxhbmspIHJldHVybiB7IGlzVmFsaWQ6IGZhbHNlLCBlcnJvck1zZzogXCJDYW4ndCBiZSBibGFua1wiIH07XHJcblx0ZWxzZSBpZiAoIWlzVmFsaWRhdGVkKSByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JNc2c6ICdXcm9uZyBmb3JtYXQnIH07XHJcblx0ZWxzZSByZXR1cm4geyBpc1ZhbGlkOiB0cnVlLCBlcnJvck1zZzogJycgfTtcclxufTtcclxuXHJcbmNvbnN0IHZhbGlkYXRlRXhwaXJhdGlvbk1vbnRoID0gKHZhbHVlKSA9PiB7XHJcblx0cmV0dXJuIC9eMFsxLTldJHxeMVswLTJdJC8udGVzdCh2YWx1ZSk7XHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0ZUV4cGlyYXRpb25ZZWFyID0gKHZhbHVlKSA9PiB7XHJcblx0cmV0dXJuIC9eXFxkezJ9JC8udGVzdCh2YWx1ZSk7XHJcbn07XHJcblxyXG4vKiBDVkMgaW5wdXQgaGFuZGxpbmcgKi9cclxuY29uc3QgaGFuZGxlQ1ZDTnVtYmVyID0gKGUpID0+IHtcclxuXHRjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xyXG5cdGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWU7XHJcblx0Y29uc3QgeyBpc1ZhbGlkLCBlcnJvck1zZyB9ID0gdmFsaWRhdGVDVkModmFsdWUpO1xyXG5cclxuXHRpZiAoIWlzVmFsaWQpIHNob3dFcnJvck1lc3NhZ2UoaW5wdXQsIGVycm9yTXNnKTtcclxuXHRlbHNlIGNsZWFyRXJyb3IoaW5wdXQpO1xyXG5cclxuXHRpbnNlcnRPdXRwdXQoY3ZjTnVtYmVyT3V0cHV0LCB2YWx1ZSk7XHJcbn07XHJcblxyXG5jb25zdCB2YWxpZGF0ZUNWQyA9ICh2YWx1ZSkgPT4ge1xyXG5cdGNvbnN0IHRyaW1tZWQgPSB2YWx1ZS50cmltKCk7XHJcblx0Y29uc3QgaXNCbGFuayA9IGNoZWNrQmxhbmsodHJpbW1lZCk7XHJcblx0Y29uc3QgaXNWYWxpZGF0ZWQgPSAvXlxcZHszfSQvLnRlc3QodHJpbW1lZCk7XHJcblxyXG5cdGlmIChpc0JsYW5rKSByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JNc2c6IFwiQ2FuJ3QgYmUgYmxhbmtcIiB9O1xyXG5cdGVsc2UgaWYgKCFpc1ZhbGlkYXRlZCkgcmV0dXJuIHsgaXNWYWxpZDogZmFsc2UsIGVycm9yTXNnOiAnV3JvbmcgZm9ybWF0JyB9O1xyXG5cdGVsc2UgcmV0dXJuIHsgaXNWYWxpZDogdHJ1ZSwgZXJyb3JNc2c6ICcnIH07XHJcbn07XHJcblxyXG4vKiBvdXRwdXQgaW5zZXJ0aW5nICovXHJcbmNvbnN0IGluc2VydE91dHB1dCA9IChvdXRwdXQsIHZhbHVlKSA9PiB7XHJcblx0b3V0cHV0LmlubmVyVGV4dCA9IHZhbHVlO1xyXG59O1xyXG5cclxuLyogZXJyb3IgaGFuZGxpbmcgKi9cclxuY29uc3Qgc2hvd0Vycm9yTWVzc2FnZSA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xyXG5cdGNvbnN0IGVycm9yID0gaW5wdXQuY2xvc2VzdCgnLmRldGFpbHMtZm9ybV9faW5wdXQtY29udGFpbmVyJykucXVlcnlTZWxlY3RvcignLmRldGFpbHMtZm9ybV9fZXJyb3InKTtcclxuXHRlcnJvci5pbm5lclRleHQgPSBtZXNzYWdlO1xyXG5cdGlucHV0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVycm9yID0gKGlucHV0KSA9PiB7XHJcblx0c2hvd0Vycm9yTWVzc2FnZShpbnB1dCwgJycpO1xyXG5cdGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcbn07XHJcblxyXG4vKiBidXR0b25zIGhhbmRsaW5nICovXHJcbmNvbnN0IGhhbmRsZVN1Ym1pdEJ0biA9IChlKSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IHsgaXNWYWxpZDogaXNOYW1lVmFsaWQsIGVycm9yTXNnOiBuYW1lRXJyb3IgfSA9IHZhbGlkYXRlQ2FyZGhvbGRlck5hbWUoY2FyZE51bWJlcklucHV0LnZhbHVlKTtcclxuXHRjb25zdCB7IGlzVmFsaWQ6IGlzQ2FyZE51bWJlclZhbGlkLCBlcnJvck1zZzogY2FyZE51bWJlckVycm9yIH0gPSB2YWxpZGF0ZUNhcmROdW1iZXIoY2FyZE51bWJlcklucHV0LnZhbHVlKTtcclxuXHRjb25zdCB7IGlzVmFsaWQ6IGlzRXhwaXJhdGlvbk1vbnRoVmFsaWQsIGVycm9yTXNnOiBleHBNb250aEVycm9yIH0gPSB2YWxpZGF0ZUV4cGlyYXRpb24oXHJcblx0XHRleHBpcmF0aW9uTW9udGhJbnB1dC52YWx1ZSxcclxuXHRcdHZhbGlkYXRlRXhwaXJhdGlvbk1vbnRoXHJcblx0KTtcclxuXHRjb25zdCB7IGlzVmFsaWQ6IGlzRXhwaXJhdGlvblllYXJWYWxpZCwgZXJyb3JNc2c6IGV4cFllYXJFcnJvciB9ID0gdmFsaWRhdGVFeHBpcmF0aW9uKFxyXG5cdFx0ZXhwaXJhdGlvblllYXJJbnB1dC52YWx1ZSxcclxuXHRcdHZhbGlkYXRlRXhwaXJhdGlvblllYXJcclxuXHQpO1xyXG5cdGNvbnN0IHsgaXNWYWxpZDogaXNDVkNWYWxpZCwgZXJyb3JNc2c6IGN2Y0Vycm9yIH0gPSB2YWxpZGF0ZUNWQyhjdmNOdW1iZXJJbnB1dC52YWx1ZSk7XHJcblxyXG5cdC8qIGNoZWNrIGlmIGFsbCBhcmUgdmFsaWQgKi9cclxuXHRjb25zdCBpc1ZhbGlkID0gaXNOYW1lVmFsaWQgJiYgaXNDYXJkTnVtYmVyVmFsaWQgJiYgaXNFeHBpcmF0aW9uTW9udGhWYWxpZCAmJiBpc0V4cGlyYXRpb25ZZWFyVmFsaWQgJiYgaXNDVkNWYWxpZDtcclxuXHRpZiAoaXNWYWxpZCkgc2hvd0NvbmZpcm1hdGlvbigpO1xyXG5cclxuXHQvKiBhZGQgZXJyb3JzIHRvIGludmFsaWQgaW5wdXQgZmllbGRzICovXHJcblx0aWYgKCFpc05hbWVWYWxpZCkgc2hvd0Vycm9yTWVzc2FnZShjYXJkaG9sZGVySW5wdXQsIG5hbWVFcnJvcik7XHJcblx0aWYgKCFpc0NhcmROdW1iZXJWYWxpZCkgc2hvd0Vycm9yTWVzc2FnZShjYXJkTnVtYmVySW5wdXQsIGNhcmROdW1iZXJFcnJvcik7XHJcblx0aWYgKCFpc0V4cGlyYXRpb25Nb250aFZhbGlkKSBzaG93RXJyb3JNZXNzYWdlKGV4cGlyYXRpb25Nb250aElucHV0LCBleHBNb250aEVycm9yKTtcclxuXHRpZiAoIWlzRXhwaXJhdGlvblllYXJWYWxpZCkgc2hvd0Vycm9yTWVzc2FnZShleHBpcmF0aW9uWWVhcklucHV0LCBleHBZZWFyRXJyb3IpO1xyXG5cdGlmICghaXNDVkNWYWxpZCkgc2hvd0Vycm9yTWVzc2FnZShjdmNOdW1iZXJJbnB1dCwgY3ZjRXJyb3IpO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0NvbmZpcm1hdGlvbiA9ICgpID0+IHtcclxuXHRkZXRhaWxzRnJvbnQuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9uLWZsaXAtb3V0Jyk7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRkZXRhaWxzRnJvbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uLWZsaXAtb3V0Jyk7XHJcblx0XHRkZXRhaWxzRnJvbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcblx0XHRkZXRhaWxzQmFjay5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb24tZmxpcC1pbicpO1xyXG5cdFx0ZGV0YWlsc0JhY2suY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblx0fSwgOTAwKTtcclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdGRldGFpbHNCYWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGlvbi1mbGlwLWluJyk7XHJcblx0fSwgMTgwMCk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVDb250aW51ZUJ0biA9IChlKSA9PiB7XHJcblx0ZGV0YWlsc0NhcmQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNvbXBsZXRlZCcpO1xyXG5cdGRldGFpbHNGcm9udC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHRkZXRhaWxzQmFjay5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHRjbGVhcklucHV0cygpO1xyXG5cdGNsZWFyT3V0cHV0cygpO1xyXG59O1xyXG5cclxuY29uc3QgY2xlYXJJbnB1dHMgPSAoKSA9PiB7XHJcblx0Y2FyZGhvbGRlcklucHV0LnZhbHVlID0gJyc7XHJcblx0Y2FyZE51bWJlcklucHV0LnZhbHVlID0gJyc7XHJcblx0ZXhwaXJhdGlvbk1vbnRoSW5wdXQudmFsdWUgPSAnJztcclxuXHRleHBpcmF0aW9uWWVhcklucHV0LnZhbHVlID0gJyc7XHJcblx0Y3ZjTnVtYmVySW5wdXQudmFsdWUgPSAnJztcclxufTtcclxuXHJcbmNvbnN0IGNsZWFyT3V0cHV0cyA9ICgpID0+IHtcclxuXHRjYXJkaG9sZGVyT3V0cHV0LmlubmVyVGV4dCA9IERFRkFVTFRfQ0FSREhPTERFUjtcclxuXHRjYXJkTnVtYmVyT3V0cHV0LmlubmVyVGV4dCA9IERFRkFVTFRfQ0FSRF9OVU1CRVI7XHJcblx0ZXhwaXJhdGlvbk1vbnRoT3V0cHV0LmlubmVyVGV4dCA9IERFRkFVTFRfRVhQSVJBVElPTl9NT05USDtcclxuXHRleHBpcmF0aW9uWWVhck91dHB1dC5pbm5lclRleHQgPSBERUZBVUxUX0VYUElSQVRJT05fWUVBUjtcclxuXHRjdmNOdW1iZXJPdXRwdXQuaW5uZXJUZXh0ID0gREVGQVVMVF9DVkM7XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbWFpbik7XHJcbiJdfQ==
